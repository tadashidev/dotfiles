
monitor=,preferred,auto,1

$terminal = ghostty
$browser = sway-launcher-desktop run-desktop ~/.local/share/applications/chromium-browser.desktop
$menu = ghostty --class=local.runner --linux-cgroup=never --gtk-single-instance=false -e sway-launcher-desktop

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

env = TERMINAL,$terminal
env = PROTON_ENABLE_WAYLAND,1

exec-once = hyprsunset
exec-once = hyprpaper
exec-once = hypridle
exec-once = wl-clip-persist --clipboard regular
exec-once = clipse -listen
exec-once = fcitx5 --replace -d

ecosystem {
  enforce_permissions = 1
}
permission = /nix/store/[a-z0-9]{32}-grim-[0-9.]*/bin/grim, screencopy, allow

general {
    gaps_in = -2
    gaps_out = -4
    border_size = 4
    
    col.inactive_border = rgb(144,140,170)
    col.active_border = rgb(82,79,103)
    
    layout = master
    resize_on_border = true
    hover_icon_on_border = true
    
    snap {
        enabled = true
        window_gap = 32
        monitor_gap = 32
        border_overlap = true
        respect_gaps = true
    }
}

master {
	mfact = 0.6
	new_status = inherit
	new_on_top = true
}

decoration {
    blur {
        enabled = false
    }
    
    shadow {
        enabled = false
    }
    
    dim_around = 0.2
}

animations {
    enabled = false
}

# No gaps/borders when only.
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
windowrule = rounding 0, floating:0, onworkspace:w[tv1]
windowrule = bordersize 0, floating:0, onworkspace:f[1]
windowrule = rounding 0, floating:0, onworkspace:f[1]

# Round border on floating windows.
windowrule = rounding 4, floating:1
windowrule = roundingpower 4, floating:1

misc {
    disable_autoreload = true
    
    disable_hyprland_logo = true
    force_default_wallpaper = 1
    
    key_press_enables_dpms = true
    
    col.splash = 0x575279FF
    splash_font_family = Go Smallcaps
    
    enable_swallow = true
    swallow_regex = com.mitchellh.ghostty
    
    new_window_takes_over_fullscreen = 1
    initial_workspace_tracking = 2
    
    enable_anr_dialog = true
    anr_missed_pings = 4
}

input {
    kb_layout = us
    
    follow_mouse = 2
    sensitivity = 0.1
    
    touchpad {
        disable_while_typing = false
        natural_scroll = true
    }
}

cursor {
    inactive_timeout = 8
    
    persistent_warps = true
    warp_on_change_workspace = 1
    warp_on_toggle_special = 1
    
    hide_on_key_press = true
}

binds {
    hide_special_on_workspace_change = true
    workspace_center_on = 1
}

xwayland {
    enabled = true
    force_zero_scaling = true
    create_abstract_socket = true
}

render {
    new_render_scheduling = true
}

$mainMod = SUPER

bind = $mainMod, Return, exec, $terminal
bind = $mainMod, X, killactive,
bind = $mainMod, Space, exec, $menu

bind = $mainMod, Escape, layoutmsg, cyclenext
bind = $mainMod, M, layoutmsg, swapwithmaster master

bind = $mainMod, W, cyclenext, hist
bind = $mainMod, W, alterzorder, top

bind = $mainMod, S, toggleswallow

bind = $mainMod Shift, Escape, swapnext

bind = $mainMod, F, togglefloating

bind = $mainMod, Tab, togglespecialworkspace, systeminfo

exec-once = [workspace name:terminal] $terminal
exec-once = [workspace name:browser silent] $browser
workspace = special:systeminfo, on-created-empty:$terminal -e btop

$outputScreenshot = ~/Pictures/Screenshots/"$(date +'Screenshot_%Y%m%d-%H%M%S.png')"
bind = , Print, exec, grim -t png -l 9 - | tee $outputScreenshot | wl-copy --type image/png
bind = Shift, Print, exec, grim -g "$(slurp)" -t ppm - | satty --filename - --fullscreen --disable-notifications --save-after-copy --early-exit --font-family 'Atkinson Hyperlegible Next' --initial-tool arrow --output-filename $outputScreenshot --copy-command 'wl-copy --type image/png'

bind = $mainMod, N, workspace, name:terminal
bind = $mainMod, E, workspace, name:browser
bind = $mainMod, I, workspace, name:other
bind = $mainMod, O, workspace, name:background

bind = $mainMod Shift, N, movetoworkspace, name:terminal
bind = $mainMod Shift, E, movetoworkspace, name:browser
bind = $mainMod Shift, I, movetoworkspace, name:other
bind = $mainMod Shift, O, movetoworkspace, name:background

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brillo -u 150000 -q -A 2
bindel = ,XF86MonBrightnessDown, exec, brillo -u 150000 -q -U 2

bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# Fix random XWayland issues.
windowrule = suppressevent maximize, class:.*
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# App launcher.
windowrule = float, class:local.runner
windowrule = size 50% 75%, class:local.runner
windowrule = center 1, class:local.runner
windowrule = pin, class:local.runner
windowrule = stayfocused, class:local.runner
windowrule = dimaround 1, class:local.runner